import{g as t}from"./p-986eab93.js";function e(t,e,n=!1,o=null){const s=new CustomEvent(t,e);n&&(o?o.dispatchEvent(s):document.dispatchEvent(s))}function n(t){return t&&"string"==typeof t&&0!==t.length?t.split("").map((t=>t===t.toLowerCase()?t:"-"+t.toLowerCase())).join(""):""}function o(t){if("string"!=typeof t)throw new Error("Invalid model chain");return t.split("@").join("")}function s(t){if("boolean"==typeof t)return t;if("string"==typeof t)switch(t.toLowerCase().trim()){case"true":case"1":return!0;case"false":case"0":case null:return!1;default:return Boolean(t)}return Boolean(t)}function c(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}function r(t,e){const n=document.createElement("style");n.innerHTML=e,t.appendChild(n)}function i(t,e=null){let n=window.$$;return n&&n.SSAPP_CONTEXT&&n.SSAPP_CONTEXT.BASE_URL&&n.SSAPP_CONTEXT.SEED&&0!==t.indexOf(n.SSAPP_CONTEXT.BASE_URL)&&0!==t.indexOf("data:image")&&(t=`${n.SSAPP_CONTEXT.BASE_URL}${0===t.indexOf("/")?t.substr(1):t}`),fetch(t,e)}window.cardinal=window.cardinal||{},window.cardinal.oldCustomTheme=window.cardinal.oldCustomTheme||{};const{oldCustomTheme:a}=window.cardinal;a.dependencies=a.dependencies||{},a.imports=a.imports||{},a.appTheme=a.appTheme||null;const{dependencies:l,imports:u}=a,d=/@import.*?["']([^"']+)["'].*?;/g;function w(t){return new Promise(((e,n)=>{i(t).then((t=>{if(t.ok)return e(t.text());n({url:t.url,status:t.status,statusText:t.statusText})}))}))}function f(t,e){return!!e&&(e.shadowRoot?t.parentNode===e.shadowRoot.host:f(e,e.parentElement))}function m(){let e=t=>{let e={};t.addEventListener("styleExists",(n=>{n.stopImmediatePropagation(),n.preventDefault();let o=n.detail.componentTag;(0,n.detail.callback)(void 0,e.hasOwnProperty(o),t),e[o]||(e[o]=!0)})),t.addEventListener("componentWasRemoved",(t=>{let n=t.detail.componentTag;e[n]&&delete e[n]}))};return e(document.querySelector("body")),n=>{const{componentWillLoad:o,disconnectedCallback:s}=n;n.componentWillLoad=function(){const n=t(this);if(n&&n.isConnected){let t=t=>{const{basePath:s}=window.WebCardinal;let c=n.tagName.toLowerCase(),r=e=>new Promise((n=>{let r=s+"/themes/"+t+"/components/"+c+"/"+c+".css";l[r]||(l[r]=new Promise(((t,e)=>{w(r).then((e=>{t(e)})).catch(e)}))),l[r].then((t=>{var n,o;(n=r,o=t,u[n]||(u[n]=new Promise(((t,e)=>{d.exec(o)?o.replace(d,((n,s)=>{l[s]||(l[s]=w(s)),l[s].then((e=>{t(o.replace(n,e))})).catch(e)})):t(o)}))),u[n]).then((t=>{let n=document.createElement("style");n.innerHTML=t,e.append(n)}))})).catch((t=>{console.log(`Request on resource ${t.url} ended with status: ${t.status} (${t.statusText})`)})).finally((()=>{n(o&&o.call(this))}))}));return n.shadowRoot?(e(n),r(n.shadowRoot)):new Promise(n.isConnected?t=>{let e=f(n,n.parentElement);n.isSlotted=e;let s=new CustomEvent("styleExists",{bubbles:!0,cancelable:!0,composed:!0,detail:{callback:(n,s,c)=>{n?console.log(n):s?t(o&&o.call(this)):(e||(c=c.shadowRoot),r(c).then((()=>{t()})))},componentTag:e?"SLOTTED:"+c:c}});n.dispatchEvent(s)}:t=>{t(o&&o.call(this))})};return a.appTheme?t(a.appTheme):new Promise((e=>{let o=new CustomEvent("getThemeConfig",{bubbles:!0,cancelable:!0,composed:!0,detail:(n,o)=>{if(n)return console.log(n);a.appTheme=o,t(a.appTheme).then((()=>{e()}))}});n.dispatchEvent(o)}))}return o&&o.call(this)},n.disconnectedCallback=function(){const e=t(this);let n=e.tagName.toLowerCase();e.isSlotted&&(n="SLOTTED:"+n);let o=new CustomEvent("componentWasRemoved",{bubbles:!0,cancelable:!0,composed:!0,detail:{componentTag:n}});e.dispatchEvent(o),s&&s.call(this)}}}window.cardinal=window.cardinal||{},window.cardinal.customTheme=window.cardinal.customTheme||{THEME:void 0,IMPORTS:{},EVENTS:{GET_THEME:"getThemeConfig",ADD_STYLE:"CustomTheme:add-style",REMOVE_STYLE:"CustomTheme:remove-style"}};const b=window.cardinal.customTheme;async function p(t){const{basePath:e}=window.WebCardinal,n=t.tagName.toLowerCase(),o=t.mode||t.getAttribute("mode")||"default",s=`${e}/themes/${b.THEME}/components/${n}/${n+("default"!==o?"."+o:"")+".css"}`;if(!b.IMPORTS[s]){const[t,e]=await async function(t){try{const e=await i(t);return[!0,await e.text()]}catch(t){return console.log(t),[!1]}}(s);if(!t)return;b.IMPORTS[s]=e}const c=b.IMPORTS[s];t.shadowRoot?(function(t){const e=t.host,n={true:{},false:{}};e.addEventListener(b.EVENTS.ADD_STYLE,(o=>{o.preventDefault(),o.stopImmediatePropagation();const{data:{tag:s,slotted:c},callback:r}=o.detail;n[c][s]||(r(void 0,c?{target:e}:{target:t}),n[c][s]=!0)})),e.addEventListener(b.EVENTS.REMOVE_STYLE,(t=>{t.preventDefault(),t.stopImmediatePropagation();const{data:{tag:e,slotted:o}}=t.detail;n[o][e]=!1}))}(t.shadowRoot),r(t.shadowRoot,c)):(t.isSlotted=function(t){for(;t.parentElement;){if(t.parentElement.shadowRoot)return t.parentElement.shadowRoot.host===t.parentNode;t=t.parentElement}return!1}(t),t.dispatchEvent(new CustomEvent(b.EVENTS.ADD_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:n,slotted:t.isSlotted},callback:async(t,e)=>{if(t)return console.log(t);const{target:n}=e;r(n,c)}}})))}function h(){return e=>{const{componentWillLoad:n,disconnectedCallback:o}=e;e.componentWillLoad=async function(){const e=t(this);return(e||e.isConnected)&&(b.THEME?await p(e):await async function(t,e){t.dispatchEvent(new CustomEvent(b.EVENTS.GET_THEME,{bubbles:!0,cancelable:!0,composed:!0,detail:async(n,o)=>{if(n)return console.log(n);b.THEME=o,await e(t)}}))}(e,p)),n&&n.call(this)},e.disconnectedCallback=async function(){const e=t(this);return e.dispatchEvent(new CustomEvent(b.EVENTS.REMOVE_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:e.tagName.toLowerCase(),slotted:!!e.isSlotted}}})),o&&o.call(this)}}}window.cardinal=window.cardinal||{},window.cardinal.controllers=window.cardinal.controllers||{},window.cardinal.pendingControllerRequests=window.cardinal.pendingControllerRequests||{};const{controllers:g,pendingControllerRequests:y}=window.cardinal,E={registerController:(t,e)=>{if(g[t]=e,y[t])for(;y[t].length;)y[t].pop().resolve(g[t])},getController:async(t,e=!1)=>{const n=window.WebCardinal;if(n){if(!0===e&&"ContainerController"===t&&(t="WebcController"),"object"==typeof n.controllers){const{controllers:e}=n;if(e[t])return e[t]}if("string"==typeof n.basePath){const{basePath:e}=window.WebCardinal;try{let n=await import(`${e}/scripts/controllers/${t}.js`);return n.default||n}catch(t){return console.error(t),null}}}if(g[t])return g[t];let o=`scripts/controllers/${t}.js`;if(e&&(o=`cardinal/base/controllers/${t}.js`),void 0!==window.basePath){let t="/"===window.basePath[window.basePath.length-1]?"":"/";o=window.basePath+t+o}try{let t=await import(o);return t.default||t}catch(t){return console.error(t),null}}};export{m as C,o as a,h as b,e as c,c as d,i as e,E as f,n,s}