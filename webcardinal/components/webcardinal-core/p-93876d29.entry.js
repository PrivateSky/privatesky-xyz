import{r as o,c as t,h as e,F as a}from"./p-751bf9a8.js";import{H as r}from"./p-3693c2fd.js";const d={};const l=class{constructor(e){o(this,e),this.initialised=t(this,"initialised",7),this.confirmed=t(this,"confirmed",7),this.closed=t(this,"closed",7),this.isLoading=!1,this.isVisible=!1,this.showCancelButton=!0,this.cancelButtonText="Close",this.confirmButtonText="Ok",this.centered=!0,this.autoShow=!0,this.autoClose=!0,this.canClose=!0,this.showFooter=!0}async componentWillLoad(){this.autoShow&&(this.isVisible=!0),this.modalName&&(this.isLoading=!0,this.content=await(async o=>{const{basePath:t}=window.WebCardinal;if(d[o])return d[o];const e=`${t}/modals/${o}.html`;try{const t=await fetch(e),a=await t.text();if(!t.ok)throw new Error(a);return d[o]=a,a}catch(t){return console.log(`Error while loading ${o} modal at ${e}`,t),null}})(this.modalName),this.isLoading=!1,this.host.innerHTML=this.content),this.initialised.emit(this.host)}async show(){this.isVisible=!0}async hide(){this.isVisible=!1}async destroy(){this.host.remove()}handleBackdropClick(o){o.preventDefault(),o.stopImmediatePropagation(),this.canClose&&this.autoClose&&o.target===o.currentTarget&&this.closed.emit(!1)}handleClose(o){o.preventDefault(),o.stopImmediatePropagation(),this.closed.emit(!0)}handleConfirm(o){o.preventDefault(),o.stopImmediatePropagation(),this.confirmed.emit({modal:this.host,event:o})}hasSlot(o){return!!this.host.querySelector(`[slot="${o}"]`)}hasTitleSlot(){return!!this.host.querySelector('[slot="title"]')}hasFooterSlot(){return!!this.host.querySelector('[slot="footer"]')}getTitleContent(){return this.hasSlot("title")?e("slot",{name:"title"}):this.modalTitleContent?e("div",{innerHTML:this.modalTitleContent}):e("h2",{class:"modal-title"},this.modalTitle)}getFooterContent(){return this.hasSlot("footer")?e("slot",{name:"footer"}):this.modalFooterContent?e("div",{innerHTML:this.modalFooterContent}):e(a,null,this.showCancelButton&&e("button",{type:"button",class:"cancel",onClick:this.handleClose.bind(this)},this.cancelButtonText),e("button",{type:"button",class:"confirm",onClick:this.handleConfirm.bind(this)},this.confirmButtonText))}render(){return this.isVisible?e("div",{class:"webc-modal fade show",tabindex:"-1",role:"dialog",onClick:this.handleBackdropClick.bind(this)},e("div",{class:`webc-modal-dialog ${this.centered?"centered":""} `,role:"document"},e("div",{class:"webc-modal-content"},e("div",{class:"modal-header"},this.getTitleContent(),this.canClose&&e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.handleClose.bind(this)},e("span",{"aria-hidden":"true"},"Ã—"))),this.isLoading?e("div",{class:"webc-modal-body"},e("webc-spinner",null)):e(a,null,e("div",{class:"webc-modal-body"},this.modalName?e("slot",null):e("div",{class:"text-content"},this.text)),this.showFooter&&e("div",{class:"webc-modal-footer"},this.getFooterContent()))))):null}};(function(o,t,e,a){var r,d=arguments.length,l=d<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,e):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(o,t,e,a);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(l=(d<3?r(l):d>3?r(t,e,l):r(t,e))||l);d>3&&l&&Object.defineProperty(t,e,l)})([r()],l.prototype,"host",void 0),l.style={default:":host{display:block}:host .webc-modal{position:fixed;top:0;left:0;z-index:var(--webc-modal-z-index);width:100%;height:100%;overflow:hidden;background:var(--webc-modal-backdrop-background);outline:0}:host .webc-modal .webc-modal-dialog{position:relative;width:auto;margin:var(--webc-modal-dialog-margin);pointer-events:none}:host .webc-modal .webc-modal-dialog.centered{display:flex;align-items:center;min-height:calc(100% - calc(var(--webc-modal-dialog-margin)) * 2)}:host .webc-modal.fade .webc-modal-dialog{transition:transform 0.3s ease-out;transform:translate(0, -50px)}:host .webc-modal.show .webc-modal-dialog{transform:none}:host .webc-modal.modal-static .webc-modal-dialog{transform:scale(1.02)}:host .webc-modal-dialog-scrollable{height:calc(100% - calc(var(--webc-modal-dialog-margin)) * 2)}:host .webc-modal-dialog-scrollable .webc-modal-content{max-height:100%;overflow:hidden}:host .webc-modal-dialog-scrollable .webc-modal-body{overflow-y:auto}:host .webc-modal-dialog-centered{display:flex;align-items:center;min-height:subtract(100%, calc(var(--webc-modal-dialog-margin) * 2))}:host .webc-modal-content{position:relative;display:flex;flex-direction:column;width:100%;color:var(--webc-modal-content-color);pointer-events:auto;background-color:var(--webc-modal-content-background);background-clip:padding-box;border:var(--webc-modal-content-border-width) solid var(--webc-modal-content-border-color);border-radius:var(--webc-modal-border-radius);box-shadow:var(--webc-modal-content-shadow);outline:0}:host .modal-header{display:flex;flex-shrink:0;align-items:center;justify-content:space-between;padding:var(--webc-modal-header-padding);border-bottom:var(--webc-modal-header-border-width) solid var(--webc-modal-header-border-color);border-top-left-radius:var(--webc-modal-border-radius);border-top-right-radius:var(--webc-modal-border-radius)}:host .modal-header .modal-title{margin:0;color:var(--webc-modal-header-title-color);line-height:var(--webc-modal-header-title-line-height)}:host .modal-header .btn-close{padding:var(--webc-modal-header-padding) -y/2 var(--webc-modal-header-padding) -x/2;margin:var(--webc-modal-header-padding) -y/-2 var(--webc-modal-header-padding) -x/-2 var(--webc-modal-header-padding) -y/-2 auto}:host .webc-modal-body{position:relative;flex:1 1 auto;padding:var(--webc-modal-inner-padding);min-height:50px;color:var(--webc-modal-body-color)}:host .webc-modal-footer{display:flex;flex-wrap:wrap;flex-shrink:0;align-items:center;justify-content:flex-end;padding:calc(var(--webc-modal-inner-padding));border-top:var(--webc-modal-footer-border-width) solid var(--webc-modal-footer-border-color);border-bottom-right-radius:var(--webc-modal-border-radius);border-bottom-left-radius:var(--webc-modal-border-radius)}:host .webc-modal-footer button{color:var(--webc-modal-footer-button-color);background-color:var(--webc-modal-footer-button-background-color);border:var(--webc-modal-footer-button-border);border-radius:var(--webc-modal-footer-button-border-radius);padding:var(--webc-modal-footer-button-padding)}:host .webc-modal-footer button.cancel{color:var(--webc-modal-footer-cancel-button-color);background-color:var(--webc-modal-footer-cancel-button-background-color)}:host .webc-modal-footer button.confirm{color:var(--webc-modal-footer-confirm-button-color);background-color:var(--webc-modal-footer-confirm-button-background-color)}:host .webc-modal-footer>*{margin:calc(var(--webc-modal-footer-margin-between) / 2)}@media (min-width: 576px){:host .webc-modal-dialog{max-width:500px;margin:1.75rem auto}}"};export{l as webc_modal}