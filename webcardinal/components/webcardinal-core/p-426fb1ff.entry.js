import{r as t,c as s,h as i}from"./p-fb0959f7.js";import{H as e}from"./p-f95368b0.js";import"./p-5b88ecac.js";import{B as a}from"./p-c2bba7e7.js";import{e as o}from"./p-e6bd91d6.js";import{p as r}from"./p-794858b0.js";import"./p-0c3518a5.js";const n={};const c=class{constructor(i){t(this,i),this.getModelEvent=s(this,"webcardinal:model:get",7),this.getTranslationModelEvent=s(this,"webcardinal:translationModel:get",7),this.chain=""}async componentWillLoad(){if(this.host.isConnected&&(this.template=await(async t=>{const{basePath:s}=window.WebCardinal;if(n[t])return n[t];const i=`${s}/templates/${t}.html`;try{const s=await fetch(i),e=await s.text();if(!s.ok)throw new Error(e);return n[t]=e,e}catch(s){return console.log(`Error while loading ${t} template at ${i}`,s),null}})(this.templateName),this.host.innerHTML=this.template,this.chain=o(this.host),this.chain)){try{this.model=await r(this.getModelEvent),this.translationModel=await r(this.getTranslationModelEvent)}catch(t){console.error(t)}Array.from(this.host.childNodes).forEach((t=>{a.bindElement(t,{model:this.model,translationModel:this.translationModel,recursive:!0,enableTranslations:!0,chainPrefix:this.chain?this.chain.slice(1):null})}))}}render(){return i("slot",null)}};!function(t,s,i,e){var a,o=arguments.length,r=o<3?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,s,i,e);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(r=(o<3?a(r):o>3?a(s,i,r):a(s,i))||r);o>3&&r&&Object.defineProperty(s,i,r)}([e()],c.prototype,"host",void 0);export{c as webc_template}