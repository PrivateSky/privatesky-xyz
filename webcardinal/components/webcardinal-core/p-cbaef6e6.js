import{E as t,a as i,b as s,c as e}from"./p-61a7920a.js";import{M as n,T as o}from"./p-0aafcc26.js";function a(t){let i;if("function"==typeof t.detail?i=t.detail:t.detail&&"function"==typeof t.detail.callback&&(i=t.detail.callback),i)return i;console.warn("Invalid callback for event",t)}class r{constructor(t,{model:i,translationModel:s,tags:e,routing:r}){this.listeners={getModel:()=>null,getTranslationModel:()=>null,getTags:()=>null,getRouting:()=>null},this.host=t,i&&(this.model=i,this.listeners.getModel=t=>{t.stopImmediatePropagation();const s=a(t);if(s){if(t.detail.chain){let e=t.detail.chain;return e.startsWith(n)?(e=e.slice(1),void s(void 0,i.getChainValue(e))):(console.warn([`Invalid chain found for ${t} (chain: "${e}")!`,`A valid chain must start with "${n}".`].join("\n")),void s(void 0,i))}s(void 0,i)}}),s&&(this.translationModel=s,this.listeners.getTranslationModel=t=>{t.stopImmediatePropagation();const i=a(t);if(i){if(t.detail.chain){let e=t.detail.chain;return e.startsWith(o)?(e=e.slice(1),void i(void 0,s.getChainValue(e))):(console.warn([`Invalid chain found for ${t} (chain: "${e}")!`,`A valid chain must start with "${o}".`].join("\n")),void i(void 0,s))}i(void 0,s)}}),e&&(this.tags=e,this.listeners.getTags=t=>{t.stopImmediatePropagation();const i=a(t);if(i){if(t.detail.tag){if(!this.tags[t.detail.tag])return void i(`There is no page tag "${t.detail.tag}" registered in webcardinal.json`);i(void 0,this.tags[t.detail.tag])}i(void 0,this.tags)}}),r&&(this.routing=r,this.listeners.getRouting=t=>{t.stopImmediatePropagation();const i=a(t);i&&i(void 0,this.routing)})}get getModel(){if(!this.model)return;const i=t;return{add:()=>this.host.addEventListener(i,this.listeners.getModel),remove:()=>this.host.removeEventListener(i,this.listeners.getModel),eventName:i}}get getTranslationModel(){if(!this.translationModel)return;const t=i;return{add:()=>this.host.addEventListener(t,this.listeners.getTranslationModel),remove:()=>this.host.removeEventListener(t,this.listeners.getTranslationModel),eventName:t}}get getTags(){if(!this.tags)return;const t=s;return{add:()=>this.host.addEventListener(t,this.listeners.getTags),remove:()=>this.host.removeEventListener(t,this.listeners.getTags),eventName:t}}get getRouting(){if(!this.routing)return;const t=e;return{add:()=>this.host.addEventListener(t,this.listeners.getRouting),remove:()=>this.host.removeEventListener(t,this.listeners.getRouting),eventName:t}}}export{r as C}