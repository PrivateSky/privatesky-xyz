import{g as t}from"./p-a9ce478c.js";function e(t,e,n=!1,o=null){const s=new CustomEvent(t,e);n&&(o?o.dispatchEvent(s):document.dispatchEvent(s))}function n(t){return t&&"string"==typeof t&&0!==t.length?t.split("").map((t=>t===t.toLowerCase()?t:"-"+t.toLowerCase())).join(""):""}function o(t,e,n,o=null){let s=t.replace(e,n);return o?o(s):s}function s(t){if("string"!=typeof t)throw new Error("Invalid model chain");return t.split("@").join("")}function c(t){if("boolean"==typeof t)return t;if("string"==typeof t)switch(t.toLowerCase().trim()){case"true":case"1":return!0;case"false":case"0":case null:return!1;default:return Boolean(t)}return Boolean(t)}function r(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}function i(t,e){const n=document.createElement("style");n.innerHTML=e,t.appendChild(n)}function a(t,e=null){let n=window.$$;return n&&n.SSAPP_CONTEXT&&n.SSAPP_CONTEXT.BASE_URL&&n.SSAPP_CONTEXT.SEED&&0!==t.indexOf(n.SSAPP_CONTEXT.BASE_URL)&&0!==t.indexOf("data:image")&&(t=`${n.SSAPP_CONTEXT.BASE_URL}${0===t.indexOf("/")?t.substr(1):t}`),fetch(t,e)}window.cardinal=window.cardinal||{},window.cardinal.oldCustomTheme=window.cardinal.oldCustomTheme||{};const{oldCustomTheme:l}=window.cardinal;l.dependencies=l.dependencies||{},l.imports=l.imports||{},l.appTheme=l.appTheme||null;const{dependencies:u,imports:d}=l,w=/@import.*?["']([^"']+)["'].*?;/g;function f(t){return new Promise(((e,n)=>{a(t).then((t=>{if(t.ok)return e(t.text());n({url:t.url,status:t.status,statusText:t.statusText})}))}))}function m(t,e){return!!e&&(e.shadowRoot?t.parentNode===e.shadowRoot.host:m(e,e.parentElement))}function b(){let e=t=>{let e={};t.addEventListener("styleExists",(n=>{n.stopImmediatePropagation(),n.preventDefault();let o=n.detail.componentTag;(0,n.detail.callback)(void 0,e.hasOwnProperty(o),t),e[o]||(e[o]=!0)})),t.addEventListener("componentWasRemoved",(t=>{let n=t.detail.componentTag;e[n]&&delete e[n]}))};return e(document.querySelector("body")),n=>{const{componentWillLoad:o,disconnectedCallback:s}=n;n.componentWillLoad=function(){const n=t(this);if(n&&n.isConnected){let t=t=>{const{basePath:s}=window.WebCardinal;let c=n.tagName.toLowerCase(),r=e=>new Promise((n=>{let r=s+"/themes/"+t+"/components/"+c+"/"+c+".css";u[r]||(u[r]=new Promise(((t,e)=>{f(r).then((e=>{t(e)})).catch(e)}))),u[r].then((t=>{var n,o;(n=r,o=t,d[n]||(d[n]=new Promise(((t,e)=>{w.exec(o)?o.replace(w,((n,s)=>{u[s]||(u[s]=f(s)),u[s].then((e=>{t(o.replace(n,e))})).catch(e)})):t(o)}))),d[n]).then((t=>{let n=document.createElement("style");n.innerHTML=t,e.append(n)}))})).catch((t=>{console.log(`Request on resource ${t.url} ended with status: ${t.status} (${t.statusText})`)})).finally((()=>{n(o&&o.call(this))}))}));return n.shadowRoot?(e(n),r(n.shadowRoot)):new Promise(n.isConnected?t=>{let e=m(n,n.parentElement);n.isSlotted=e;let s=new CustomEvent("styleExists",{bubbles:!0,cancelable:!0,composed:!0,detail:{callback:(n,s,c)=>{n?console.log(n):s?t(o&&o.call(this)):(e||(c=c.shadowRoot),r(c).then((()=>{t()})))},componentTag:e?"SLOTTED:"+c:c}});n.dispatchEvent(s)}:t=>{t(o&&o.call(this))})};return l.appTheme?t(l.appTheme):new Promise((e=>{let o=new CustomEvent("getThemeConfig",{bubbles:!0,cancelable:!0,composed:!0,detail:(n,o)=>{if(n)return console.log(n);l.appTheme=o,t(l.appTheme).then((()=>{e()}))}});n.dispatchEvent(o)}))}return o&&o.call(this)},n.disconnectedCallback=function(){const e=t(this);let n=e.tagName.toLowerCase();e.isSlotted&&(n="SLOTTED:"+n);let o=new CustomEvent("componentWasRemoved",{bubbles:!0,cancelable:!0,composed:!0,detail:{componentTag:n}});e.dispatchEvent(o),s&&s.call(this)}}}window.cardinal=window.cardinal||{},window.cardinal.customTheme=window.cardinal.customTheme||{THEME:void 0,IMPORTS:{},EVENTS:{GET_THEME:"getThemeConfig",ADD_STYLE:"CustomTheme:add-style",REMOVE_STYLE:"CustomTheme:remove-style"}};const p=window.cardinal.customTheme;async function h(t){const{basePath:e}=window.WebCardinal,n=t.tagName.toLowerCase(),o=t.mode||t.getAttribute("mode")||"default",s=`${e}/themes/${p.THEME}/components/${n}/${n+("default"!==o?"."+o:"")+".css"}`;if(!p.IMPORTS[s]){const[t,e]=await async function(t){try{const e=await a(t);return[!0,await e.text()]}catch(t){return console.log(t),[!1]}}(s);if(!t)return;p.IMPORTS[s]=e}const c=p.IMPORTS[s];t.shadowRoot?(function(t){const e=t.host,n={true:{},false:{}};e.addEventListener(p.EVENTS.ADD_STYLE,(o=>{o.preventDefault(),o.stopImmediatePropagation();const{data:{tag:s,slotted:c},callback:r}=o.detail;n[c][s]||(r(void 0,c?{target:e}:{target:t}),n[c][s]=!0)})),e.addEventListener(p.EVENTS.REMOVE_STYLE,(t=>{t.preventDefault(),t.stopImmediatePropagation();const{data:{tag:e,slotted:o}}=t.detail;n[o][e]=!1}))}(t.shadowRoot),i(t.shadowRoot,c)):(t.isSlotted=function(t){for(;t.parentElement;){if(t.parentElement.shadowRoot)return t.parentElement.shadowRoot.host===t.parentNode;t=t.parentElement}return!1}(t),t.dispatchEvent(new CustomEvent(p.EVENTS.ADD_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:n,slotted:t.isSlotted},callback:async(t,e)=>{if(t)return console.log(t);const{target:n}=e;i(n,c)}}})))}function g(){return e=>{const{componentWillLoad:n,disconnectedCallback:o}=e;e.componentWillLoad=async function(){const e=t(this);return(e||e.isConnected)&&(p.THEME?await h(e):await async function(t,e){t.dispatchEvent(new CustomEvent(p.EVENTS.GET_THEME,{bubbles:!0,cancelable:!0,composed:!0,detail:async(n,o)=>{if(n)return console.log(n);p.THEME=o,await e(t)}}))}(e,h)),n&&n.call(this)},e.disconnectedCallback=async function(){const e=t(this);return e.dispatchEvent(new CustomEvent(p.EVENTS.REMOVE_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:e.tagName.toLowerCase(),slotted:!!e.isSlotted}}})),o&&o.call(this)}}}window.cardinal=window.cardinal||{},window.cardinal.controllers=window.cardinal.controllers||{},window.cardinal.pendingControllerRequests=window.cardinal.pendingControllerRequests||{};const{controllers:y,pendingControllerRequests:E}=window.cardinal,C={registerController:(t,e)=>{if(y[t]=e,E[t])for(;E[t].length;)E[t].pop().resolve(y[t])},getController:async(t,e=!1)=>{const n=window.WebCardinal;if(n){if(!0===e&&"ContainerController"===t&&(t="WccController"),"object"==typeof n.controllers){const{controllers:e}=n;if(e[t])return e[t]}if("string"==typeof n.basePath){const{basePath:e}=window.WebCardinal;try{let n=await import(`${e}/scripts/controllers/${t}.js`);return n.default||n}catch(t){return console.error(t),null}}}if(y[t])return y[t];let o=`scripts/controllers/${t}.js`;if(e&&(o=`cardinal/base/controllers/${t}.js`),void 0!==window.basePath){let t="/"===window.basePath[window.basePath.length-1]?"":"/";o=window.basePath+t+o}try{let t=await import(o);return t.default||t}catch(t){return console.error(t),null}}};export{b as C,g as a,s as b,e as c,r as d,C as e,a as f,o as g,n,c as s}