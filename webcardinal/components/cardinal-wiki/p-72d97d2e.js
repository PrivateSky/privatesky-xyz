import{g as t}from"./p-425ef2b7.js";function n(t,n,e=!1,o=null){const s=new CustomEvent(t,n);e&&(o?o.dispatchEvent(s):document.dispatchEvent(s))}function e(t,n,e){let o=null;for(;t;){if(t.matches(n)){o=t;break}if(e&&t.matches(e))break;t=t.parentElement}return o}function o(t,n,e=1){let o=null;for(;t;){if(t.tagName.toLowerCase()===n&&0==--e){o=t;break}t=t.parentElement}return o}function s(t){let n=t.replace(/[^A-Za-z0-9_-]/g,"-").toLowerCase();return n=n.replace(/(-+){2}/gm,"-"),n=n.replace(/(-+)$/gm,""),n}function c(t,n){const e=s(t),o=n.querySelector("#"+e);if(!o)return;o.scrollIntoView();let c=window.location.href,i="?";-1!==c.indexOf("chapter=")?(c=window.location.href.split("chapter=")[0],c.length>0&&(i=c[c.length-1],c=c.substring(0,c.length-1))):i=c.indexOf("?")>0?"&":"?",window.history.pushState({},"",`${c}${i+"chapter="}${e}`)}function i(t){return t&&"string"==typeof t&&0!==t.length?t.split("").map((t=>t===t.toLowerCase()?t:"-"+t.toLowerCase())).join(""):""}function a(t){if("string"!=typeof t)throw new Error("Invalid model chain");return t.split("@").join("")}function l(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}function r(t,n){const e=document.createElement("style");e.innerHTML=n,t.appendChild(e)}function u(t,n=null){let e=window.$$;return e&&e.SSAPP_CONTEXT&&e.SSAPP_CONTEXT.BASE_URL&&e.SSAPP_CONTEXT.SEED&&0!==t.indexOf(e.SSAPP_CONTEXT.BASE_URL)&&0!==t.indexOf("data:image")&&(t=`${e.SSAPP_CONTEXT.BASE_URL}${0===t.indexOf("/")?t.substr(1):t}`),fetch(t,n)}window.cardinal=window.cardinal||{},window.cardinal.oldCustomTheme=window.cardinal.oldCustomTheme||{};const{oldCustomTheme:d}=window.cardinal;d.dependencies=d.dependencies||{},d.imports=d.imports||{},d.appTheme=d.appTheme||null;const{dependencies:w,imports:m}=d,f=/@import.*?["']([^"']+)["'].*?;/g;function b(t){return new Promise(((n,e)=>{u(t).then((t=>{if(t.ok)return n(t.text());e({url:t.url,status:t.status,statusText:t.statusText})}))}))}function h(t,n){return!!n&&(n.shadowRoot?t.parentNode===n.shadowRoot.host:h(n,n.parentElement))}function p(){let n=t=>{let n={};t.addEventListener("styleExists",(e=>{e.stopImmediatePropagation(),e.preventDefault();let o=e.detail.componentTag;(0,e.detail.callback)(void 0,n.hasOwnProperty(o),t),n[o]||(n[o]=!0)})),t.addEventListener("componentWasRemoved",(t=>{let e=t.detail.componentTag;n[e]&&delete n[e]}))};return n(document.querySelector("body")),e=>{const{componentWillLoad:o,disconnectedCallback:s}=e;e.componentWillLoad=function(){const e=t(this);if(e&&e.isConnected){let t=t=>{const{basePath:s}=window.WebCardinal;let c=e.tagName.toLowerCase(),i=n=>new Promise((e=>{let i=s+"/themes/"+t+"/components/"+c+"/"+c+".css";w[i]||(w[i]=new Promise(((t,n)=>{b(i).then((n=>{t(n)})).catch(n)}))),w[i].then((t=>{var e,o;(e=i,o=t,m[e]||(m[e]=new Promise(((t,n)=>{f.exec(o)?o.replace(f,((e,s)=>{w[s]||(w[s]=b(s)),w[s].then((n=>{t(o.replace(e,n))})).catch(n)})):t(o)}))),m[e]).then((t=>{let e=document.createElement("style");e.innerHTML=t,n.append(e)}))})).catch((t=>{console.log(`Request on resource ${t.url} ended with status: ${t.status} (${t.statusText})`)})).finally((()=>{e(o&&o.call(this))}))}));return e.shadowRoot?(n(e),i(e.shadowRoot)):new Promise(e.isConnected?t=>{let n=h(e,e.parentElement);e.isSlotted=n;let s=new CustomEvent("styleExists",{bubbles:!0,cancelable:!0,composed:!0,detail:{callback:(e,s,c)=>{e?console.log(e):s?t(o&&o.call(this)):(n||(c=c.shadowRoot),i(c).then((()=>{t()})))},componentTag:n?"SLOTTED:"+c:c}});e.dispatchEvent(s)}:t=>{t(o&&o.call(this))})};return d.appTheme?t(d.appTheme):new Promise((n=>{let o=new CustomEvent("getThemeConfig",{bubbles:!0,cancelable:!0,composed:!0,detail:(e,o)=>{if(e)return console.log(e);d.appTheme=o,t(d.appTheme).then((()=>{n()}))}});e.dispatchEvent(o)}))}return o&&o.call(this)},e.disconnectedCallback=function(){const n=t(this);let e=n.tagName.toLowerCase();n.isSlotted&&(e="SLOTTED:"+e);let o=new CustomEvent("componentWasRemoved",{bubbles:!0,cancelable:!0,composed:!0,detail:{componentTag:e}});n.dispatchEvent(o),s&&s.call(this)}}}window.cardinal=window.cardinal||{},window.cardinal.customTheme=window.cardinal.customTheme||{THEME:void 0,IMPORTS:{},EVENTS:{GET_THEME:"getThemeConfig",ADD_STYLE:"CustomTheme:add-style",REMOVE_STYLE:"CustomTheme:remove-style"}};const g=window.cardinal.customTheme;async function E(t){const{basePath:n}=window.WebCardinal,e=t.tagName.toLowerCase(),o=t.mode||t.getAttribute("mode")||"default",s=`${n}/themes/${g.THEME}/components/${e}/${e+("default"!==o?"."+o:"")+".css"}`;if(!g.IMPORTS[s]){const[t,n]=await async function(t){try{const n=await u(t);return[!0,await n.text()]}catch(t){return console.log(t),[!1]}}(s);if(!t)return;g.IMPORTS[s]=n}const c=g.IMPORTS[s];t.shadowRoot?(function(t){const n=t.host,e={true:{},false:{}};n.addEventListener(g.EVENTS.ADD_STYLE,(o=>{o.preventDefault(),o.stopImmediatePropagation();const{data:{tag:s,slotted:c},callback:i}=o.detail;e[c][s]||(i(void 0,c?{target:n}:{target:t}),e[c][s]=!0)})),n.addEventListener(g.EVENTS.REMOVE_STYLE,(t=>{t.preventDefault(),t.stopImmediatePropagation();const{data:{tag:n,slotted:o}}=t.detail;e[o][n]=!1}))}(t.shadowRoot),r(t.shadowRoot,c)):(t.isSlotted=function(t){for(;t.parentElement;){if(t.parentElement.shadowRoot)return t.parentElement.shadowRoot.host===t.parentNode;t=t.parentElement}return!1}(t),t.dispatchEvent(new CustomEvent(g.EVENTS.ADD_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:e,slotted:t.isSlotted},callback:async(t,n)=>{if(t)return console.log(t);const{target:e}=n;r(e,c)}}})))}function T(){return n=>{const{componentWillLoad:e,disconnectedCallback:o}=n;n.componentWillLoad=async function(){const n=t(this);return(n||n.isConnected)&&(g.THEME?await E(n):await async function(t,n){t.dispatchEvent(new CustomEvent(g.EVENTS.GET_THEME,{bubbles:!0,cancelable:!0,composed:!0,detail:async(e,o)=>{if(e)return console.log(e);g.THEME=o,await n(t)}}))}(n,E)),e&&e.call(this)},n.disconnectedCallback=async function(){const n=t(this);return n.dispatchEvent(new CustomEvent(g.EVENTS.REMOVE_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:n.tagName.toLowerCase(),slotted:!!n.isSlotted}}})),o&&o.call(this)}}}window.cardinal=window.cardinal||{},window.cardinal.controllers=window.cardinal.controllers||{},window.cardinal.pendingControllerRequests=window.cardinal.pendingControllerRequests||{};export{p as C,T as a,i as b,n as c,l as d,s as e,o as f,e as g,a as n,c as s}