System.register(["./p-e1460616.system.js","./p-90e1ba03.system.js","./p-ca300ef6.system.js","./p-f4127746.system.js","./p-0550088a.system.js"],(function(e){"use strict";var t,n,r,i,o;return{setters:[function(e){t=e.r;n=e.h;r=e.g},function(){},function(){},function(e){i=e.T},function(e){o=e.C}],execute:function(){var a="@event:";var s="pages/";var p=function(){function e(){}e._prepareRoutesTree=function(e,t){var n=function(e){var r={};e.forEach((function(e){var i=e.name.replace(/(\s+|-)/g,"").toLowerCase();if(!r[i]){var o=e.path;switch(t){case"browser":case"query":o=e.path;break;case"hash":o="/#"+e.path;break}r[i]={path:o}}if(typeof e.children==="object"&&Array.isArray(e.children.items)){r[i].children={type:"known",items:n(e.children.items)}}else if(typeof e.children==="string"&&e.children.indexOf(a)===0){var s=e.children.substring(a.length);r[i].children={type:"event",event:s}}}));return r};return n(e)};e._prepareConfiguration=function(t,n){var r={};r.baseUrl=n;var i=n+s;var o=new URL(n).pathname;if(t.modals){r.modals={};if(Object.keys(t.modals).length){for(var p in t.modals){r.modals[p]=i+t.modals[p]}}}if(!t.menu||!t.menu.defaultMenuConfig){throw new Error("Default menu configuration is missing")}var f=t.menu.defaultMenuConfig;if(t.profile){r.profile=t.profile}var c=function(e){for(var t=0;t<e.length;t++){if(e[t].children&&e[t].children.items){c(e[t].children.items)}else{if(typeof e[t].indexed!=="undefined"&&e[t].indexed.toString()==="false"){e.splice(t,1)}}}return e};var l=function(e,t){if(t){t=t.replace(/^\/|\/$/g,"")}else{t=""}e.forEach((function(e){if(!e.path){var n=e.name.toLowerCase();var r=n.toLowerCase().replace(/\s+/g,"-");r=r.replace(/[:\/]/g,"");e.path=r}var s="/";if(t.length===0){s=""}if(!e.path.startsWith("/")){e.path=s+e.path}var p=t+e.path;p=p.replace(/^\//g,"");e.path=o+p;if(e.children){e.type="abstract";if(!e.icon){e.icon=f.icon}}else{for(var c in f){if(!e.hasOwnProperty(c)){e[c]=f[c]}}if(e.component==="psk-page-loader"){if(!e.componentProps){e.componentProps={}}Object.assign(e.componentProps,e.options);if(e.pageSrc){if(e.pageSrc.startsWith("http")){e.componentProps.pageUrl=e.pageSrc}else{e.componentProps.pageUrl=i+e.pageSrc}}else{var d=e.name.replace(/[:.!?]/g,"").replace(/\s/g,"-").toLowerCase();e.componentProps.pageUrl=i+t+s+d+".html"}}}if(typeof e.children==="object"&&Array.isArray(e.children)){e.children={type:"known",items:JSON.parse(JSON.stringify(e.children))};l(e.children.items,p)}else{if(typeof e.children==="string"&&e.children.indexOf(a)==0){var u=e.children.substring(a.length);e.children={type:"event",event:u};e.component="psk-ssapp-loader"}}}));return e};r.routes=l(t.menu.pages);r.historyType="browser";var d=t.menu.defaultMenuConfig.historyType;if(d==="hash"||d==="query"){r.historyType=d}if(d==="query"){var u="?";if(t.menu.defaultMenuConfig.pagePrefix){u=t.menu.defaultMenuConfig.pagePrefix}var h=function(e){e.forEach((function(e){var t=e.path;if(t.indexOf("/")===0){t=t.substr(1)}e.path=""+u+t;if(e.children){h(e.children.items)}}))};h(r.routes)}var g=function(e){var t=[];function n(e){e.forEach((function(e){if(Object.prototype.hasOwnProperty.call(e,"tags")){var r=e["tags"].split(",").map((function(e){return e.trim()}));r.forEach((function(n){t[n]=e.path}))}if(typeof e.children==="object"&&Array.isArray(e.children.items)){n(e.children.items)}}))}n(e);return t};var v=JSON.parse(JSON.stringify(r.routes));r.menu=c(v);r.tags=g(v);r.pagesHierarchy=e._prepareRoutesTree(r.routes,d);return r};return e}();var f="default";var c="1.0.0";var l="/pages/";var d={username:"Cardinal App",email:"privatesky@axiologic.net",avatar:"https://privatesky.xyz/assets/images/privatesky.png"};var u={defaultMenuConfig:{icon:"fa-bars",type:"route",component:"psk-page-loader",exact:false,indexed:true,historyType:"browser"},pages:[{name:"Home",path:"/home",pageSrc:"index.html"}]};var h={theme:f,appVersion:c,basePagesUrl:l,profile:d,menu:u};var g="app-config.json";window.globalConfig={};var v=function(){function e(e){var t=this;this.configIsLoaded=false;this.pendingRequests=[];var n;if(window&&window.location&&window.location.origin){n=window.location.origin}var r=document.querySelector("base");if(r){var i=r.getAttribute("href");if(i){n+=i}}if(!n.endsWith("/")){n+="/"}g=n+g;window.basePath=n;this._getAppConfiguration(g,(function(e,r){t.configuration=p._prepareConfiguration(r,n);t.configuration.theme=r.theme;t.configuration.appVersion=r.appVersion;t.configIsLoaded=true;while(t.pendingRequests.length){var i=t.pendingRequests.pop();if(!t.configuration[i.configName]){throw new Error("Config "+i.configName+" was not provided. Did you set it in app-config.json?")}i.callback(undefined,t.configuration[i.configName])}}));e.addEventListener("getThemeConfig",this._provideConfig("theme"));e.addEventListener("getAppVersion",this._provideConfig("appVersion"));e.addEventListener("needRoutes",this._provideConfig("routes"));e.addEventListener("needMenuItems",this._provideConfig("menu"));e.addEventListener("getUserInfo",this._provideConfig("profile"));e.addEventListener("getHistoryType",this._provideConfig("historyType"));e.addEventListener("getModals",this._provideConfig("modals"));e.addEventListener("getTags",this._provideConfig("tags"));e.addEventListener("validateUrl",(function(e){e.stopImmediatePropagation();var n=e.detail,r=n.sourceUrl,i=n.callback;if(i&&typeof i==="function"){t._parseSourceUrl(r,i)}else{console.error("Callback was not properly provided!")}}));e.addEventListener("getCustomLandingPage",(function(e){var t=e.detail;if(window.frameElement){if(window.frameElement.hasAttribute("landing-page")){var n=window.frameElement.getAttribute("landing-page");return t(undefined,n)}}t()}))}e.prototype._provideConfig=function(e){var t=this;return function(n){n.stopImmediatePropagation();var r=n.detail;if(r&&typeof r==="function"){if(t.configIsLoaded){if(!t.configuration[e]){throw new Error("Config "+e+" was not provided")}r(undefined,t.configuration[e])}else{t.pendingRequests.push({configName:e,callback:r})}}}};e.prototype._parseSourceUrl=function(e,t){e=e.replace(/(\s+|-)/g,"").toLowerCase();var n=e.split("/");var r=this.configuration.pagesHierarchy;var i=function(i){var o=n[i];var a=Object.keys(r).find((function(e){return r[e].path.toLowerCase().indexOf(o)!==-1}));var s=typeof r[a]!=="undefined";if(!r[o]&&!s){t(e+" is not a valid path in the application!");return"break"}var p=void 0;if(s){p=r[a].children}else{p=r[o].children}if(typeof p==="object"&&typeof p.items==="object"&&i!==n.length){r=p.items;return"continue"}var f=void 0;if(s){f=r[a].path}else{f=r[o].path}return{value:t(undefined,f)}};for(var o=0;o<n.length;o++){var a=i(o);if(typeof a==="object")return a.value;if(a==="break")break}};e.prototype._getAppConfiguration=function(e,t){var n=new XMLHttpRequest;n.open("GET",e);n.onload=function(){if(n.status!=200){console.error("Configuration file app-config.json was not found!");t(null,h)}else{var e=JSON.parse(n.responseText);for(var r in h){if(!e.hasOwnProperty(r)){e[r]=h[r]}}t(null,e)}};n.onerror=function(){t(new Error("An error occurred"))};n.send()};return e}();var m=undefined&&undefined.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o;return i>3&&o&&Object.defineProperty(t,n,o),o};var y=e("psk_app_root",function(){function e(e){t(this,e);this.mobileLayout=false;this.componentCode="";this.hasSlot=false}e.prototype.__createLoader=function(){var e=12;var t="";for(var n=1;n<=e;n++){t+='<div class="sk-circle'+n+' sk-circle"></div>'}var r=document.createElement("div");r.className="app-loader";r.innerHTML="<div class='sk-fading-circle'>"+t+"</div>";return r};e.prototype.connectedCallback=function(){this.disconnected=false};e.prototype.disconnectedCallback=function(){this.disconnected=true};e.prototype.componentWillLoad=function(){var e=this;if(this.host.parentElement){this.htmlLoader=this.__createLoader();this.host.parentElement.appendChild(this.htmlLoader)}var t=this.host.innerHTML;t=t.replace(/\s/g,"");if(t.length){this.hasSlot=true}if(typeof this.controller==="string"){return new Promise((function(t,n){o.getController(e.controller).then((function(n){if(e.disconnected){return t()}new n(e.host);t()})).catch(n)}))}else{new v(this.host)}};e.prototype.componentDidLoad=function(){if(this.htmlLoader&&this.htmlLoader.parentNode){this.htmlLoader.parentNode.removeChild(this.htmlLoader)}};e.prototype.render=function(){var e="psk-default-renderer";return this.hasSlot?n("slot",null):n(e,null)};Object.defineProperty(e.prototype,"host",{get:function(){return r(this)},enumerable:true,configurable:true});return e}());m([i({isMandatory:false,description:["This property is a string that will permit the developer to choose his own controller.","If no controller is provided, a default controller will be passed to the component","It is recommended that each app to extend the provided default controller and adapt it to the application needs"],propertyType:"string",defaultValue:"null"})],y.prototype,"controller",void 0)}}}));